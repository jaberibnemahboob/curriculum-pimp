<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Exercise: IMDB Theater Movie</title>

        <style>
            *{
                box-sizing: border-box;
                margin: 0;
            }
            p{margin: 0.5em;}
            @import url(https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700);
            body{font-family: Open Sans, Arial, sans-serif; font-size: 12px; color: #656565;}
            main, header, nav, section, footer{
                margin: 0.5em 0;
            }
            .theaterMovies{
                display: grid;
                grid-gap: 0.5em;
                grid-template-columns: repeat(auto-fill, 49%);
            }
            .movie .img{grid-area: mImg;}
            .movie .summary{grid-area: mSmr;}
            .movie{
                display: grid;
                grid-gap: 0.3em;
                grid-template-columns: repeat(3, 1fr);
                grid-template-areas:
                    "mImg mSmr mSmr";
                border: 1px solid #DEDEDE;
                padding: 0.5em;
            }
            nav{
                display: grid;
                grid-gap: 0.5em;
                grid-template-columns: repeat(auto-fill, 32%);
                background: #DEDEDE;
                padding: 1em;
            }
            nav a{text-decoration: none; text-align: center; font-size: 1.2em; }
            h1{text-align: center;}


            footer{text-align: center;}
            .btn {
                background: #3498db;
                background-image: -webkit-linear-gradient(top, #3498db, #2980b9);
                background-image: -moz-linear-gradient(top, #3498db, #2980b9);
                background-image: -ms-linear-gradient(top, #3498db, #2980b9);
                background-image: -o-linear-gradient(top, #3498db, #2980b9);
                background-image: linear-gradient(to bottom, #3498db, #2980b9);
                -webkit-border-radius: 28;
                -moz-border-radius: 28;
                border-radius: 28px;
                font-family: Arial;
                color: #ffffff;
                font-size: 12px;
                padding: 10px 20px 10px 20px;
                text-decoration: none;
                margin-top: 2em;
            }

            .btn:hover {
              background: #3cb0fd;
              background-image: -webkit-linear-gradient(top, #3cb0fd, #3498db);
              background-image: -moz-linear-gradient(top, #3cb0fd, #3498db);
              background-image: -ms-linear-gradient(top, #3cb0fd, #3498db);
              background-image: -o-linear-gradient(top, #3cb0fd, #3498db);
              background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
              text-decoration: none;
            }
        </style>

    </head>
    <body>

        <main>
            <header>
                <h1>New Movies - In Theaters</h1>
            </header>

            <nav>
                <a href="">Home</a>
                <a href="">About</a>
                <a href="">Contact</a>
            </nav>

            <section class="theaterMovies">

            </section>

            <footer>Copyright &copy; Kea Exercise</footer>
        </main>

        <template class="theaterMovieTemplate">
            <article class="movie">
                <div class="img">
                    <img class="image" src="data-imgsrc" alt="data-imgalt"/>
                </div>
                <div class="summary">
                    <h3><span class="title">data-title</span> (<span class="publish_year">data-year</span>)<span class="limited">data-limited</span></h3>
                    <p><span class="length">data-length</span> - <span class="genre">data-genre</span></p>
                    <p class="description">data-description</p>
                    <p><b>Director: </b><span class="director">data-director</span></p>
                    <p><b>Stars: </b><span class="stars">data-stars</span></p>
                    <a class="btn trailer" href="data-trailer" target="_blank">Watch Trailer</a>
                </div>
            </article>
        </template>

        <script>

            /*
            let moviesData = [
                {
                    "name": "It",
                    "limited": 0,
                    "year": 2017,
                    "image":{
                        "src": "https://images-na.ssl-images-amazon.com/images/M/MV5BOTE0NWEyNDYtYWI5MC00MWY0LTg1NDctZjAwMjkyMWJiNzk1XkEyXkFqcGdeQXVyNjk5NDA3OTk@._V1_UY209_CR0,0,140,209_AL_.jpg",
                        "alt": "Image: It"
                    },
                    "length": "135 min",
                    "genre": ["Drama", "Horror"],
                    "description": "A group of bullied kids band together when a monster, taking the appearance of a clown, begins hunting children.",
                    "director": "Andy Muschietti",
                    "stars": ["Bill Skarsg√•rd", "Jaeden Lieberher", "Finn Wolfhard", "Sophia Lillis"],
                    "trailer": "http://www.imdb.com/video/imdb/vi1396095257?ref_=inth_ov_vi"
                },
                {
                    "name": "Home Again",
                    "limited": 0,
                    "year": 2017,
                    "image":{
                        "src": "https://images-na.ssl-images-amazon.com/images/M/MV5BNDMxNTQ0NjIwOV5BMl5BanBnXkFtZTgwODE5NjA5MjI@._V1_UY209_CR0,0,140,209_AL_.jpg",
                        "alt": "Image: Home Again"
                    },
                    "length": "97 min",
                    "genre": ["Comedy", "Drama", "Romance"],
                    "description": "Life for a single mom in Los Angeles takes an unexpected turn when she allows three young guys to move in with her.",
                    "director": "Hallie Meyers-Shyer",
                    "stars": ["Nat Wolff", "Reese Witherspoon", "Lake Bell", "Michael Sheen"],
                    "trailer": "http://www.imdb.com/video/imdb/vi535214361?ref_=inth_ov_vi"
                },
                {
                    "name": "Rememory",
                    "limited": 1,
                    "year": 2017,
                    "image":{
                        "src": "https://images-na.ssl-images-amazon.com/images/M/MV5BMjMzNzAyNzYwOF5BMl5BanBnXkFtZTgwMDg5ODEyMzI@._V1_UY209_CR0,0,140,209_AL_.jpg",
                        "alt": "Image: Rememory"
                    },
                    "length": "111 min",
                    "genre": ["Drama", "Mystery", "Sci-Fi"],
                    "description": "The widow of a wise professor stumbles upon one of his inventions that's able to record and play a person's memory.",
                    "director": "Mark Palansky",
                    "stars": ["Peter Dinklage", "Matt Ellis", "Jordana Largy", "Martin Donovan"],
                    "trailer": "http://www.imdb.com/video/imdb/vi674019609?ref_=inth_ov_vi"
                },
                {
                    "name": "The Good Catholic",
                    "year": 2017,
                    "image":{
                        "src": "https://images-na.ssl-images-amazon.com/images/M/MV5BMzdjYTk1OTAtNTY4Ni00OTQzLWEwM2UtZDI2NGNiYjFiMmQ4XkEyXkFqcGdeQXVyMzM0NzU1MzA@._V1_UY209_CR0,0,140,209_AL_.jpg",
                        "alt": "Image: The Good Catholic"
                    },
                    "length": "96 min",
                    "genre": ["Comedy", "Drama"],
                    "description": "Daniel loved his job as a small town priest more than anything. Then he met Jane. God help him.",
                    "director": "Paul Shoulberg",
                    "stars": ["Zachary Spicer", "Wrenn Schmidt", "Danny Glover", "John C. McGinley"],
                    "trailer": "http://www.imdb.com/video/imdb/vi3284580633?ref_=inth_ov_vi"
                }
            ];

            console.log(JSON.stringify(moviesData));
            */


			let movies = document.querySelector('.theaterMovies');
			let movieTemplate = document.querySelector('.theaterMovieTemplate').content;
            //let movieDataSource = "http://localhost/keammd2ndsem/week2/submission3/curriculum-pimp/_exercise/JSONMoviesExercise/movies.json"
            let movieDataSource = "movies.json"

            function getData(link){
                fetch(link).then(function(response){
                    return response.json();
                }).then(function(json){
                    return show(json);
                });
            }
            function show(json){
                json.forEach(function(movie){
                    console.log(movie)
                    let clone = movieTemplate.cloneNode(true);

                    //change data
                    clone.querySelector(".image").src = movie.image.src;
                    clone.querySelector(".image").alt = movie.image.alt;
                    clone.querySelector(".title").textContent = movie.name;
                    clone.querySelector(".limited").textContent = (movie.limited == 1) ? ' (Limited)' : '';
                    clone.querySelector(".publish_year").textContent = movie.year;
                    clone.querySelector(".length").textContent = movie.length;
                    clone.querySelector(".genre").textContent = movie.genre.join(" | ");
                    clone.querySelector(".description").textContent = movie.description;
                    clone.querySelector(".director").textContent = movie.director;
                    clone.querySelector(".stars").textContent = movie.stars.join(", ");
                    clone.querySelector(".trailer").href = movie.trailer;

                    //add cloned data
                    movies.appendChild(clone);
                });
            }

            getData(movieDataSource);

        </script>

    </body>
</html>
